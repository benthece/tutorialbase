<div class="modal-backdrop" (click)="onBackdropClick($event)">
    <div class="modal-content">
        <button class="close-button" (click)="closeModal()">&times;</button>
        <h2>Regisztráció</h2>

        <form [formGroup]="registerForm" (ngSubmit)="registerAction()">

            <div class="form-group">
                <label for="email">
                    <i class="fas fa-envelope"></i> Email
                </label>
                <input type="email" id="email" formControlName="email" placeholder="Email" maxlength="35"
                    [class.invalid]="email?.invalid && email?.touched">
                <span class="error" *ngIf="email?.errors?.['required'] && email?.touched">
                    Az e-mail megadása kötelező.
                </span>
                <span class="error" *ngIf="email?.errors?.['email'] && email?.touched">
                    Érvénytelen e-mail formátum.
                </span>
            </div>

            <div class="form-group">
                <label for="username">
                    <i class="fas fa-user"></i> Felhasználónév
                </label>
                <input type="text" id="username" formControlName="username" placeholder="Felhasználónév" maxlength="25"
                    [class.invalid]="username?.invalid && username?.touched">
                <span class="error" *ngIf="username?.errors?.['required'] && username?.touched">
                    A felhasználónév megadása kötelező.
                </span>
            </div>

            <div class="form-group">
                <label for="password">
                    <i class="fas fa-lock"></i> Jelszó
                </label>
                <div class="password-container">
                    <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password"
                        placeholder="Jelszó" [class.invalid]="password?.invalid && password?.touched">
                    <button type="button" class="toggle-password-inside" (click)="togglePassword()">
                        <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </button>
                </div>
                <span class="error" *ngIf="password?.errors?.['required'] && password?.touched">
                    A jelszó megadása kötelező.
                </span>
            </div>

            <div class="form-group">
                <label for="confirmPassword">
                    <i class="fas fa-lock"></i> Jelszó újra
                </label>
                <div class="password-container">
                    <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword"
                        formControlName="confirmPassword" placeholder="Jelszó újra"
                        [class.invalid]="(confirmPassword?.invalid && confirmPassword?.touched) || (registerForm.errors?.['passwordMismatch'] && confirmPassword?.touched)">
                    <button type="button" class="toggle-password-inside" (click)="toggleConfirmPassword()">
                        <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                    </button>
                </div>
                <span class="error" *ngIf="confirmPassword?.errors?.['required'] && confirmPassword?.touched">
                    A jelszó megerősítése kötelező.
                </span>
                <span class="error" *ngIf="registerForm.errors?.['passwordMismatch'] && confirmPassword?.touched">
                    A megadott jelszavak nem egyeznek.
                </span>
            </div>

            <div class="error-message" *ngIf="validationErrors.length > 0">
                <i class="fas fa-exclamation-circle"></i> {{ validationErrors }}
            </div>

            <button type="submit" class="signup-button" [disabled]="!registerForm.valid || isSubmitting">
                Regisztráció
            </button>
        </form>

        <div class="login-link">
            <a (click)="switchToLogin()">Már van fiókod? Jelentkezz be</a>
        </div>
    </div>
</div>